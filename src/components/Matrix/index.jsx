import BackButton from "@/components/pvCh/BackButton";
import { useCallback, useEffect, useMemo, useRef, useState } from "react";
import { useTranslation } from "react-i18next";
import { useHistory } from "react-router-dom";
import Level1Audio from "../../assets/audio/Niv1/index.js";
import imgCharacter from "../../assets/images/pv-challenge/character/Leader.png";
import img1 from "../../assets/images/pv-challenge/character/character_1_11.png";
import CharacterMessage from "../CharacterMessage";
import ChartRd2 from "../ChartRd2";
import HeaderProfile from "../HeaderPrfile";
import { mModalArticel } from "../modal/ModalArticle";
import ModalTutorial from "../pvCh/ModalTutorial/ModalTutorial";
import NextButton from "../pvCh/NextButton";
import article1 from "@/assets/images/doc1.png";
import article2 from "@/assets/images/doc2.png";
import article3 from "@/assets/images/doc3.png";
import article4 from "@/assets/images/doc4.png";
import article5 from "@/assets/images/doc5.png";

import style from "./style.module.scss";


const HeaderBlock = ({ item, index, activeItem, nextItem, isRow }) => {


    const onNExt = useCallback(() => {
        nextItem(item)
    }, [])

    return (
        <div
            onClick={activeItem >= item.id && onNExt}
            className={`${style[`hed_${isRow ? 'row' : 'col'}_${index + 1}`]} ${activeItem === item.id && style.active} ${activeItem >= item.id ? style.is_read : ''}`}>
            <p className={style.text}>
                {activeItem >= item.id && item.text}
            </p>
        </div>
    )
}


const RoundedBlock = ({ index, listMsg, onClick, activeItem, showPopup = true }) => {


    const findItem = listMsg.find((item) => item.index === index);
    const findIndexItem = listMsg.findIndex((item) => item.index === index);


    const onnNextItem = () => {
        console.log("üöÄ ~ file: index.jsx:38 ~ RoundedBlock ~ activeItem:", activeItem)
        console.log("üöÄ ~ file: index.jsx:38 ~ RoundedBlock ~ index:", findIndexItem)
        if (findIndexItem <= activeItem - 1)
            onClick(findItem)
    }
    console.log("showw", showPopup);

    return <div className={style.block_icon} >
        {findItem && <i className={`fas fa-check cursor-pointer ${findIndexItem === activeItem - 1 && findItem.showPopup === undefined ? style.active_icon : ''}`} onClick={findItem.showPopup === undefined ? onnNextItem : null}  ></i>}
    </div>
}

const data = [
    {
        id: 1,
        text: "ETATIQUE",
        type: "profil",
        messageId: 1,
        radarId: 1,
    },
    {
        id: 2,
        text: "CRIME ORGANISE",
        type: "profil",
        messageId: 2,
        radarId: 2,
    },
    {
        id: 3,
        text: "TERRORISTE",
        type: "profil",
        messageId: 3,
        radarId: 3,
    },
    {
        id: 4,
        text: "ACTIVISTE IDIOLOGIQUE",
        type: "profil",
        messageId: 4,
        radarId: 4,
    }
    ,
    {
        id: 5,
        text: "OFFICINE SP√âCIALIS√âE",
        type: "profil",
        messageId: 5,
        radarId: 5,
    }
    ,
    {
        id: 6,
        text: "AMATEUR",
        type: "profil",
        messageId: 6,
        radarId: 6,
    }
    ,
    {
        id: 7,
        text: "VENGEUR",
        type: "profil",
        messageId: 7,
        radarId: 7,
    }
    ,
    {
        id: 8,
        text: "MALVEILLANT PATHOLOGIQUE",
        type: "profil",
        messageId: 8,
        radarId: 8,
    },
    {
        id: 9,
        text: "ESPIONNAGE",
        type: "motivation",
        messageId: 9
    },
    {
        id: 10,
        text: "PR√âPOSITIONNEMENT STRAT√âGIQUE",
        type: "motivation",
        messageId: 10
    },
    {
        id: 11,
        text: "INFLUENCE",
        type: "motivation",
        messageId: 11
    },
    {
        id: 12,
        text: "ENTRAVE AU FONCTIONNEMENT",
        type: "motivation",
        messageId: 12
    },
    {
        id: 13,
        text: "LUCRATIF",
        type: "motivation",
        messageId: 13
    },
    {
        id: 14,
        text: "D√âFI, AMUSEMENT",
        type: "motivation",
        messageId: 14
    },
]

const dataRadar = [
    {
        id: 1,
        color: 'green',
        dimension: [4, 4, 4, 2, 3]
    },
    {
        id: 2,
        color: 'blue',
        dimension: [3, 3, 3, 1, 1]
    }
    ,
    {
        id: 3,
        color: 'red',
        dimension: [2, 2, 2, 1, 4]
    }
    ,
    {
        id: 4,
        color: 'green',
        dimension: [2, 1, 1, 1, 4]
    }
    ,
    {
        id: 5,
        color: 'green',
        dimension: [4, 4, 3, 2, 3]
    }
    ,
    {
        id: 6,
        color: 'green',
        dimension: [1, 1, 1, 1, 2]
    }
    ,
    {
        id: 7,
        color: 'green',
        dimension: [2, 1, 1, 4, 2]
    }
    ,
    {
        id: 8,
        color: 'green',
        dimension: [2, 1, 2, 1, 2]
    }
]



function Matrix({ nextStep, onBack }) {
    const { t } = useTranslation();
    let history = useHistory();
    const [radar, setRadar] = useState()
    const [showTuto, setShowTuto] = useState(false);
    const [step, setStep] = useState(0);
    // const [step, setStep] = useState(2);
    const [activeItem, setActiveItem] = useState(1);
    // const [activeItem, setActiveItem] = useState(20);
    const [currentMessage, setCurrentMessage] = useState({});
    const config = useRef({
        currentItem: null
    });
    const profilList = useMemo(() => data.filter(item => item.type === "profil"), [])
    const motivationList = useMemo(() => data.filter(item => item.type === "motivation"), [])
    const listMsg = [
        {
            title: "LE HACKER EN CHEF",
            subtitle: "ETATIQUE",
            text: "Le Strat√®ge en Ombre : Ces experts du cyberespace agissent en tant que professionnels au service des √âtats et des agences de renseignement. Ils op√®rent avec une pr√©cision d'horloger, suivant un calendrier et des proc√©dures bien √©tablies. Leur flexibilit√© leur permet de personnaliser leurs outils et m√©thodes pour s'adapter √† la topologie de leurs cibles. Certains de ces acteurs ont un acc√®s √† des vuln√©rabilit√©s jour z√©ro (0-Day) et sont capables de s'infiltrer dans des r√©seaux isol√©s, menant des attaques successives pour atteindre leurs objectifs.",
            audio: Level1Audio.audio9,
            withRadar: true,
        },
        {

            title: "LE HACKER EN CHEF",
            subtitle: "CRIME ORGANISE",
            text: "Les Ma√Ætres de l'Ombre Financi√®re : Ces organisations cybercriminelles, qu'elles soient mafias, gangs, ou officines, sont obs√©d√©es par le profit. Elles se lancent dans des op√©rations sophistiqu√©es, de l'escroquerie en ligne √† la demande de ran√ßon ou aux attaques par ran√ßongiciel. Gr√¢ce √† l'accessibilit√© croissante des kits d'attaques en ligne, ces cybercriminels sont devenus de v√©ritables experts. Certains d'entre eux ont √©galement acc√®s √† des vuln√©rabilit√©s jour z√©ro (0-Day).",
            audio: Level1Audio.audio10,
            withRadar: true,
        },
        {
            title: "LE HACKER EN CHEF",
            subtitle: "TERRORISTE",
            text: "Les Harbingers du Chaos : Les cyberterroristes et cybermilices n'ont pas besoin de sophistication technique pour semer la destruction. Leur d√©termination est leur arme principale, utilis√©e pour d√©stabiliser et d√©truire, que ce soit par des attaques de d√©ni de service ou l'exploitation de vuln√©rabilit√©s de sites Internet avec des d√©figurations.",
            audio: Level1Audio.audio11,
            withRadar: true,

        },
        {
            title: "LE HACKER EN CHEF",
            subtitle: "ACTIVISTE IDIOLOGIQUE",
            text: "Les Porteurs d'un Message Virtuel : Les cyber-hacktivistes et les groupes d'int√©r√™t partagent des modes op√©ratoires similaires aux cyberterroristes, mais leurs intentions sont moins destructrices. Ils utilisent leurs comp√©tences pour v√©hiculer une id√©ologie ou un message, parfois en utilisant massivement les r√©seaux sociaux comme caisse de r√©sonance.",
            audio: Level1Audio.audio12,
            withRadar: true,

        },
        {
            title: "LE HACKER EN CHEF",
            subtitle: "OFFICINE SP√âCIALIS√âE",
            text: "Les Mercenaires de l'Encre Noire : Ces cybermercenaires sont des virtuoses de la cyberattaque, dot√©s de comp√©tences techniques exceptionnelles. Ils con√ßoivent des outils et des kits d'attaques en ligne, parfois monnay√©s, qui sont ensuite utilis√©s par d'autres groupes d'attaquants. Leur motivation principale est le gain financier.",
            audio: Level1Audio.audio13,
            withRadar: true,

        },
        {
            title: "LE HACKER EN CHEF",
            subtitle: "AMATEUR",
            text: "Les Apprentis de l'Ombre : Les script-kiddies et les hackers amateurs ont de bonnes connaissances informatiques, mais leurs attaques sont souvent basiques. Ils s'engagent dans des actes de piratage principalement pour la reconnaissance sociale, le plaisir et le d√©fi, utilisant des kits d'attaques en ligne.",
            audio: Level1Audio.audio14,
            withRadar: true,
        },
        {
            title: "LE HACKER EN CHEF",
            subtitle: "VENGEUR",
            text: "Les Justiciers Virtuels : Motiv√©s par la vengeance et un sentiment d'injustice, ces hackers sont redoutables en raison de leur connaissance interne des syst√®mes et des processus organisationnels. Leur motivation personnelle peut leur conf√©rer un pouvoir de nuisance significatif.",
            audio: Level1Audio.audio15,
            withRadar: true,

        },
        {
            title: "LE HACKER EN CHEF",
            subtitle: "MALVEILLANT PATHOLOGIQUE",
            text: "Les Sombres Opportunistes : Les motivations de ces attaquants sont souvent li√©es √† des troubles ou √† l'app√¢t du gain. Ils peuvent avoir des connaissances informatiques pour compromettre les syst√®mes de leurs cibles, utiliser des kits d'attaques en ligne, ou m√™me sous-traiter des attaques √† des officines sp√©cialis√©es. Leur cible peut parfois inclure des sources internes, comme des salari√©s m√©contents ou des prestataires peu scrupuleux.",
            audio: Level1Audio.audio16,
            withRadar: true,
        },
        {
            title: "LE HACKER EN CHEF",
            subtitle: "ESPIONNAGE",
            text: "Cette motivation conduit les attaquants √† mener des op√©rations de renseignement, qu'elles soient d'origine √©tatique ou √©conomique. Ils cherchent √† s'infiltrer discr√®tement dans les syst√®mes d'information et √† s'y maintenir durablement. Les secteurs vis√©s incluent souvent des domaines sensibles tels que l'armement, l'a√©rospatial, la pharmacie, l'√©nergie, l'√©conomie, les finances et les affaires √©trang√®res.",
            audio: Level1Audio.audio17
        },

        {
            title: "LE HACKER EN CHEF",
            subtitle: "PR√âPOSITIONNEMENT STRAT√âGIQUE",
            text: "Les attaquants pr√©positionnent leurs ressources en vue d'attaques √† long terme, sans d√©voiler imm√©diatement leurs intentions. Ils peuvent compromettre les r√©seaux d'op√©rateurs de t√©l√©communication ou infiltrer des sites Internet √† fort impact, pr√™ts √† lancer des op√©rations d'influence politique ou √©conomique √† grande √©chelle.",
            audio: Level1Audio.audio18
        },

        {
            title: "LE HACKER EN CHEF",
            subtitle: "INFLUENCE",
            text: "Les op√©rations d'influence visent √† diffuser de fausses informations, √† alt√©rer la v√©rit√©, √† mobiliser les leaders d'opinion sur les r√©seaux sociaux, √† d√©truire des r√©putations, √† divulguer des informations confidentielles ou √† d√©grader l'image d'une organisation ou d'un √âtat. L'objectif final est g√©n√©ralement la d√©stabilisation ou la modification des perceptions.",
            audio: Level1Audio.audio19

        },
        {
            title: "LE HACKER EN CHEF",
            subtitle: "ENTRAVE AU FONCTIONNEMENT",
            text: "Ces attaquants cherchent √† perturber le fonctionnement normal en rendant indisponibles des sites Internet, en provoquant une saturation informationnelle, en emp√™chant l'utilisation de ressources num√©riques ou en affectant des installations physiques. Les syst√®mes industriels sont particuli√®rement vuln√©rables, expos√©s aux attaques par le biais de r√©seaux informatiques interconnect√©s.",
            audio: Level1Audio.audio20
        },


        {
            title: "LE HACKER EN CHEF",
            subtitle: "LUCRATIF",
            text: "Les attaquants motiv√©s par le gain financier sont principalement li√©s au crime organis√©. Leurs op√©rations incluent des escroqueries en ligne, du blanchiment d'argent, de l'extorsion, des d√©tournements d'argent, la manipulation des march√©s financiers, la falsification de documents administratifs, l'usurpation d'identit√©, etc. Certaines op√©rations lucratives peuvent utiliser des m√©thodes provenant d'autres cat√©gories, mais l'objectif final reste le profit.",
            audio: Level1Audio.audio21
        },
        {
            title: "LE HACKER EN CHEF",
            subtitle: "D√âFI, AMUSEMENT",
            text: "Les attaquants qui cherchent le d√©fi et l'amusement effectuent des exploits pour la reconnaissance sociale, le plaisir ou le simple d√©fi. M√™me si leurs intentions ne sont pas n√©cessairement malveillantes, de telles op√©rations peuvent avoir des cons√©quences graves pour les victimes.",
            audio: Level1Audio.audio22
        },
        {
            index: 0,
            title: "Des hackers alg√©riens s‚Äôen prennent √† des sites marocains ",
            description: `Une cyberattaque a vis√© le site officiel de l‚ÄôUniversit√© des sciences
            Dhar El Mahraz de F√®s (FSDM) vendredi 5 ao√ªt, rapporte Morroco World News.
            L‚Äôauteur de cette man≈ìuvre serait un hacker alg√©rien, qui a laiss√© sa signature
            avec le drapeau alg√©rien sur le site Web de l‚Äôuniversit√© et une l√©gende : ¬´ Pas de
            paix entre les syst√®mes ¬ª. Sur Twitter, il a affirm√© avoir collect√© trois millions de
            lignes de donn√©es, y compris des e-mails et des mots de passe.`,
            img: article1,
        },
        // {
        //     index: 10,
        //     idVideo: "8VsvdCaSyaQ",
        //     type: "video"
        // },
        {
            index: 10,
            title: "Le cybergang francophone OPERA1ER enchaine les victimes en Afrique",
            description: ` Le groupe de cybercriminels francophone OPERA1ER, 
            √©galement connu sous les noms de DESKTOP-GROUP, Common Raven et NXSMS, 
            a cibl√© des organismes bancaires, financiers et de t√©l√©communications en Afrique de 
            l'Ouest depuis 2016. L'analyse de Group-IB r√©v√®le qu'ils ont r√©ussi √† extorquer 11 
            millions de dollars gr√¢ce √† 35 cyberattaques r√©pertori√©es entre 2018 et 2022. Les 
            attaques ont commenc√© par des e-mails de phishing contenant des chevaux de Troie 
            d'acc√®s √† distance (RAT) et d'autres outils visant √† voler les identifiants des 
            utilisateurs. Les hackers ont ensuite √©tudi√© les r√©seaux des victimes pendant une 
            p√©riode de dormance allant jusqu'√† un an avant de d√©tourner des fonds vers des 
            comptes d√©tenus par des tiers.`,
            img: article2,
        },
        {
            index: 27,
            title: "5 ans apr√®s, quelles le√ßons tirer des attaques NotPetya",
            description: `NotPetya, un puissant malware apparu en juin 2017, a 
            red√©fini les attaques de logiciels malveillants et forc√© les professionnels de la s√©curit√©
            √† revoir leurs strat√©gies. Contrairement √† la plupart des ransomwares, NotPetya 
            n'√©tait pas destin√© √† extorquer de l'argent, mais √† effacer les donn√©es. Propag√© via 
            l'outil EternalBlue vol√© √† la NSA, il a infect√© des milliers d'entreprises dans le monde, 
            causant plus de 10 milliards de dollars de dommages. Les experts consid√®rent que 
            NotPetya, attribu√© √† des op√©rateurs russes a marqu√© le passage des ransomwares 
            opportunistes aux armes de guerre cybern√©tiques soutenues par des √âtats-nations, 
            incitant les RSSI √† repenser leur approche de la s√©curit√©`,
            img: article3,
        },
        {
            index: 34,
            title: "Espionnage : Airbus, cible d'une s√©rie de cyberattaques",
            description: `Airbus a √©t√© la cible de plusieurs attaques informatiques en 2019 passant par ses sous-traitants, 
            √©veillant des soup√ßons d'espionnage industriel en provenance de Chine. Ces attaques ont touch√© Expleo 
            (anciennement Assystem), Rolls-Royce, et deux sous-traitants non identifi√©s d'Airbus. Les attaques ont suivi 
            un mod√®le o√π les sous-traitants √©taient vis√©s pour ensuite infiltrer Airbus via leurs acc√®s. Les motivations 
            semblent inclure la recherche de documents techniques de certification et d'informations li√©es √† la motorisation 
            d'a√©ronefs, y compris l'A400M et l'A350. Bien que la Chine soit soup√ßonn√©e, l'attribution reste difficile dans 
            le domaine des cyberattaques. Ces incidents soulignent les vuln√©rabilit√©s du secteur a√©ronautique face aux cybermenaces.`,
            img: article4,
        },
        {
            index: 35,
            title: "Un hacker pirate un centre de l'agence spatiale am√©ricaine avec un mini-ordinateur √† 35 dollars",
            description: `La NASA a √©t√© victime d'une attaque informatique qui a
            utilis√© un mini-ordinateur Raspberry Pi, co√ªtant seulement 35 dollars (30 euros), pour
            infiltrer le r√©seau du Jet Propulsion Laboratory (JPL) √† Pasadena, en Californie. 
            L'attaque a d√©but√© en avril 2018 et a dur√© pr√®s d'un an, compromettant 
            temporairement les syst√®mes de contr√¥le des vols spatiaux du JPL. Environ 500 
            m√©gaoctets de donn√©es ont √©t√© vol√©s, dont des fichiers confidentiels li√©s √† des 
            donn√©es scientifiques du rover Curiosity sur Mars et √† des informations soumises √† la
            r√©glementation sur le contr√¥le des exportations de technologies √† usage militaire. La 
            NASA craignait √©galement que d'autres sites puissent √™tre compromis par l'attaquant,
            ce qui a conduit √† des d√©connexions pr√©ventives.`,
            img: article5,
        },
        {
            index: 1,
            showPopup: false,
        },
        {
            index: 2,
            showPopup: false,
        },
        {
            index: 3,
            showPopup: false,
        },
        {
            index: 14,
            showPopup: false,
        },
        {
            index: 15,
            showPopup: false,
        },
        {
            index: 16,
            showPopup: false,
        },
        {
            index: 18,
            showPopup: false,
        },
        {
            index: 20,
            showPopup: false,
        },
        {
            index: 21,
            showPopup: false,
        },
        {
            index: 24,
            showPopup: false,
        },
        {
            index: 25,
            showPopup: false,
        },
        {
            index: 39,
            showPopup: false,
        },
        {
            index: 40,
            showPopup: false,
        },
        {
            index: 44,
            showPopup: false,
        },
        {
            index: 45,
            showPopup: false,
        },
        {
            index: 46,
            showPopup: false,
        },
        {
            index: 47,
            showPopup: false,
        }


    ].map((item, index) => ({ ...item, id: index + 1 }));
    const listMsgPop = [
        {
            title: "Le leader",
            text: "Cliquez sur la case pour d√©couvrir le profil",
            audio: Level1Audio.audio1,
        },
        {
            title: "Le leader",
            text: "Cliquez sur la case pour d√©couvrir le profil",
            audio: Level1Audio.audio1,
        },
        {
            title: "Le leader",
            text: "Cliquez sur la case pour d√©couvrir le profil",
            audio: Level1Audio.audio1,

        },
        {
            title: "Le leader",
            text: "Cliquez sur la case pour d√©couvrir le profil",
            audio: Level1Audio.audio1,

        },
        {
            title: "Le leader",
            text: "Cliquez sur la case pour d√©couvrir le profil",
            audio: Level1Audio.audio1,

        },
        {
            title: "Le leader",
            text: "Cliquez sur la case pour d√©couvrir le profil",
            audio: Level1Audio.audio1,

        },
        {
            title: "Le leader",
            text: "Cliquez sur la case pour d√©couvrir le profil",
            audio: Level1Audio.audio1,

        },
        {
            title: "Le leader",
            text: "Cliquez sur la case pour d√©couvrir le profil",
            audio: Level1Audio.audio1,
        },
        {
            title: "Le leader",
            text: "Cliquez sur la case pour d√©couvrir la motivation",
            audio: Level1Audio.audio1
        },

        {
            title: "Le leader",
            text: "Cliquez sur la case pour d√©couvrir la motivation",
            audio: Level1Audio.audio1
        },

        {
            title: "Le leader",
            text: "Cliquez sur la case pour d√©couvrir la motivation",
            audio: Level1Audio.audio1

        },
        {

            title: "Le leader",
            text: "Cliquez sur la case pour d√©couvrir la motivation",
            audio: Level1Audio.audio1
        },


        {
            title: "Le leader",
            text: "Cliquez sur la case pour d√©couvrir la motivation",
            audio: Level1Audio.audio1
        },

        {
            title: "Le leader",
            text: "Cliquez sur la case pour d√©couvrir la motivation",
            audio: Level1Audio.audio1
        },

        {
            index: 0,
            title: "Le leader",
            text: "Cliquez sur la coche pour voir un exemple d'attaque",
            audio: Level1Audio.audio1
        },
        {
            index: 5,
            title: "Le leader",
            text: "Cliquez sur la coche pour voir un exemple d'attaque",
            audio: Level1Audio.audio1
        },
        {
            index: 40,
            title: "Le leader",
            text: "Cliquez sur la coche pour voir un exemple d'attaque",
            audio: Level1Audio.audio1
        },
        {
            index: 32,
            title: "Le leader",
            text: "Cliquez sur la coche pour voir un exemple d'attaque",
            audio: Level1Audio.audio1
        },
        {
            index: 44,
            title: "Le leader",
            text: "Cliquez sur la coche pour voir un exemple d'attaque",
            audio: Level1Audio.audio1
        },
        {
            index: 44,
            title: "Le leader",
            text: "Cliquez sur la coche pour voir un exemple d'attaque",
            audio: Level1Audio.audio1
        }

    ];


    useEffect(() => {
        setCurrentMessage(() => ({
            title: "LE HACKER EN CHEF",
            text: " Nous verrons ensemble les diff√©rents profils et leurs motivations, et votre objectif sera de s√©lectionner le profil qui vous convient le mieux !     Commen√ßons par les diff√©rents profils !",
            audio: Level1Audio.audio3,
            onClose: () => {
                setShowTuto(item => false);
            }
        }));
        setShowTuto(() => true);
    }, [])

    useEffect(() => {
        if (activeItem === 9) {

            if (step === 0) {
                setCurrentMessage(() => ({
                    title: "LE HACKER EN CHEF",
                    text: "Maintenant que tu as pu d√©couvrir les diff√©rents profils des hackers, passons √† d√©couvrir leurs diff√©rentes motivations.",
                    audio: Level1Audio.audio4,
                    onClose: () => {
                        setStep(1);
                        setShowTuto(item => false);
                    }
                }));
                setShowTuto(item => true);
            }
            else {
                setTimeout(() => {
                    setCurrentMessage(() => ({
                        title: "LE HACKER EN CHEF",
                        text: " Appuyez sur la case qui clignote pour r√©v√©ler la motivation",
                        audio: Level1Audio.audio5,
                        onClose: () => {
                            setShowTuto(item => false);
                        }
                    }));
                    setShowTuto(item => true);
                }, 500);
            }
        }



        if (activeItem === 15) {

            setTimeout(() => {
                setCurrentMessage(() => ({
                    title: "LE HACKER EN CHEF",
                    text: " √Ä pr√©sent, nous allons examiner des exemples d'attaques pour illustrer la corr√©lation entre les profils et les motivations. Chaque case coch√©e dans le tableau repr√©sente un profil correspondant √† la motivation correspondante. Cliquez sur la case coch√©e qui clignote pour d√©couvrir les exemples. ",
                    audio: Level1Audio.audio6,
                    onClose: () => {
                        setShowTuto(item => false);
                    }
                }));
                setShowTuto(item => true);
            }, 500);


            setStep(() => 2)
        }

    }, [activeItem, step]);



    const closeModale = () => {
        if (config.current.currentItem.id === activeItem) { setActiveItem(index => index + 1); }
        setShowTuto(item => false);
        setRadar(null)
    }

    const nextItem = (currentItem) => {

        config.current.currentItem = currentItem;
        if (currentItem.type === "profil" || currentItem.type === "motivation") {
            setRadar(_ => dataRadar.find(elm => elm.id === currentItem.radarId))
            setCurrentMessage(() => listMsg.find(elm => elm.id === currentItem.messageId))
        } else {
            setCurrentMessage(currentItem)
        }
        setShowTuto(true);
    }

    const clickRoundedBlock = async (currentItem) => {
        await mModalArticel(currentItem);
        if (currentItem.id === activeItem) setActiveItem(index => index + 1);
    }

    return (
        <div className={style.container} >
            <div className=" py-2" >
                <HeaderProfile />
            </div>

            <div className="mb-3">
                <h3 className="font-Karla text-[17px] text-left text-[#9f9f9f] uppercase" >
                    {t("day1.level")}
                </h3>
            </div>
            <ModalTutorial
                personnageImage={img1}
                listMsg={[currentMessage]}
                title="My Modal"
                subtitle=""
                show={showTuto}
                onClose={closeModale}
            >
                {radar ? <div className=" flex justify-center rounded-[4px] items-center h-[180px] bg-white w-[100%]">
                    <ChartRd2 color={radar.color} dimension={radar.dimension} />
                </div> : null}
            </ModalTutorial>
            <div className={step === 0 ? style.mtx_container_1 : style.mtx_container_2}>
                {profilList.map((item, index) => <HeaderBlock key={item.id} isRow={true} item={item} index={index} activeItem={activeItem} nextItem={nextItem} />)}
                {step !== 0 &&
                    motivationList.map((item, index) => <HeaderBlock key={item.id} isRow={false} item={item} index={index} activeItem={activeItem} nextItem={nextItem} />)
                }
                {step === 2 &&
                    <>
                        <div></div>
                        {
                            [...Array(48).keys()].map((item, index) => <RoundedBlock key={index} activeItem={activeItem} index={index} listMsg={listMsg} onClick={clickRoundedBlock} />)

                        }
                    </>
                }
            </div>

            {listMsgPop[activeItem - 1] && <div className="flex mt-auto " >
                <CharacterMessage
                    imgCharacter={imgCharacter}
                    {...listMsgPop[activeItem - 1]}
                />
                <div className="flex flex-row  items-end justify-end w-full pb-2 pl-2 " >

                    <div className="flex flex-row gap-4" >
                        <BackButton className={"step_quiz_btn_next2"}
                            onClick={onBack}
                        />
                        <NextButton onClick={activeItem === 20 && nextStep} className={activeItem !== 20 ? "bg-slate-500" : ''}
                        />
                    </div>
                </div>
            </div>}

        </div>
    );
}

export default Matrix;